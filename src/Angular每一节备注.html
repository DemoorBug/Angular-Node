<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>node-mongodb建站</title>
<style type="text/css">
*{padding:0;margin:0;font-size:24px;font-family:'微软雅黑';background:#f7f7ff}script{display:none}body{padding-left:20px}strong{display:inline-block;padding:5px 130px;margin:0 auto;text-align:center;background:#02a2bd;color:#fafffa;border:1px dotted #CCC}i{display:inline-block;font-style:normal;font-weight:bolder;color:red;background:#FFF;padding:5px 6px}b{display:inline-block;font-style:normal;font-weight:bolder;color:green;background:#FFF;margin:5px 0;padding:5px 6px;border-top:1px dotted #CCC;border-bottom:1px dotted #CCC}a{display:inline-block;font-style:normal;text-decoration:none;font-weight:bolder;color:blue;background:#FFF;margin:5px 0;padding:5px 6px;border-top:1px dotted #CCC;border-bottom:1px dotted #CCC;cursor:pointer}ul{list-style:none;text-align:center}ul li{display:inline-block}ul li a{float:left;font-size:16px;color:green}.c{position:fixed;right:50px;bottom:20px;height:50px;width:50px;text-align:center;line-height:40px;border:0}u{display:inline-block;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid green;background:0}sup{font-size:14px;background:0}em{overflow:hidden;height:29px;cursor:pointer}em,em i,em b{margin:10px;border-radius:4px;background-color:#FFF;padding:10px;font-size:13px;display:block;font-style:normal}em i,em b{font-size: 20px; padding: 10px 0;margin: 0}
</style>

</head>
<body>
<ul></ul>

<strong>置顶</strong>
数据绑定：当js中的变量改变时，他会自动更新自己所影响的试图模型，原来是这样，so
ng-change  input发生改变，则触发
ng-click  点击触发
ng-repeat(重要): 用来将数据集合按照指定的形式重复渲染出来 详见table.html:38
<strong>$('em').style.height='auto'</strong>



<strong>多重视图和路由1</strong>
<em>
  <b>这个标题相关标签列出来</b>
单页应用(SPA)中往往有多重视图，在他们之间导航称之为路由。ng-view作为视图容器
ng-view 作为视图容器
<b>路由的基本使用 route.html</b>
1) 引入angular-route>添加模块angular.module('myApp',['ngRoute'])>创建布局模板，加入ng-view作为视图容器>配置路由>使用a进行路由或者注入$location实现视图路由

<b>视图之间的路由方式：</b>
1) 使用a进行路由
2) 注入$location实现路由

为什么需要第二种方式：
为了给接下来的视图传递参数

传递参数：
1) 需要在路由配置这里配置参数设置，类似/default/:pid
2) 跳转时: $location.path('/default/1')
3) 获取参数: $routeParams.pid
<i>这讲详细请看，route.js 和route.html查看详情</i>
</em>
<strong>其他视图指令</strong>
<i>这个章节都在view里面，为了方便查找</i>
<em>
<b>前面所学汇总</b>
  ng-if/ng-show/ng-hide/ng-repeat
<b>新学</b>
1) ng-switch //条件较多使用switch，更复杂的条件控制，配合on属性/ng-switch-when/ng-switch-default
  a) view.html
2) ng-include : 包含引入的意思，实际是加载外部HTML片段到当前页面中，适合创建页面模板的时，把公用的部分提取出来，然后用ngInclude引入。
  a) view.html:15
  b) 注意: 该指令会生成子作用域，如果希望使用其他作用域，则需要明确声明一个ng-controller="myControllerA"
    i) < div ng-include="'tpl/header.html'" ng-controller="myControllerA">aaa</ div>
</em>
<strong>指令6</strong>
<em>
AngularJS生命周期：
编译阶段：遍历ng-app所包含的HTML文档并根据js中指令的定义来处理页面上生命的指令。将其转换为浏览器可识别的HTML内容。
编译后会返回一个模板函数,在它被返回前，有机会对编译后的DOM树进行修改。
这个机会就在 compile里面
由于此时未进行数据绑定，操作DOM时性能开销很小，如ng-repeat和ng-transclude等内置的指令会在此时对DOM操作。
<b>编译compile directive.js:128</b>
普通用户在开发的时候很少使用
设置为函数，该选项可以返回对象或函数
<b>链接link</b>
注意：如果设置了编译函数，链接函数就会失效，可以说他们是互斥的
链接函数很常用，在这里可以进行DOM操作，

<b>$setViewValue canvas.js:34</b>
 ngModel控制器的$setViewValue(),可以动态更新视图的相关模型
</em>
<strong>指令5</strong>
<b>directive.html:43</b>
<em>
  控制器Controller
  控制器主要用于逻辑处理和控制,比如操作$scope中的模型，创建控制器的主要目的是可以吧共享的代码放在这里，供其他指令调用，设计到另外的require属性。
  <b>导入 require directive.js:100详解用法</b>
  在一个指令中可以注入其他指令的名称，因此就可以使用其控制器。
  <b>controllerAs 控制器的别名 directive.js:116</b>
  设置控制器别名以此发布控制器，且作用域可以访问controllerAs指定的别名
</em>
<strong>指令3</strong>
<b>对应案例directive.html</b>
<em>
  <b>指令详解：</b>
  指令可以使用的全部设置选项
  retrict: String,  'AECM'
  template: String or function(eElement,tAttrs){rerurn String},  //模板字符串
  repeat: boolean, //是否用模板代替指令
  priority: Number, //优先级
  terminal: Boolean, //设为true时，如果存在优先级低于当前指令的其他指令，则忽略之
  templateUrl:String,//Url字符串，指明模板文件存放地址
  scope: Boolean or Object,//作用域
  controller:String or function(scope,element,attrs,transclude),//控制器
  transclude:Boolean,//设置为true表示当前指令中可以嵌入其他内容或指令
  require:String or Array,//设置其他指令名称，可以注入这些指令控制当前指令使用
  compile://返回一个对象或者编译函数
    function(tElement,tAttrs,transclude){
      return {
        pre:function(scope,iElement,iAttrs,controller){},预处理
        post: function(scope,iElement,iAttrs,controller){} 后处理
      }
    },
  link: 设置了compile  link就不生效
    function(scope,element,attrs,ctrl){//注入require才会有ctrl

    }
<i>tElement t代表模板 iElement i代表实例</i>
<b>参数详解</b>
优先级 priority
多数指令会忽略该参数,使用其默认值0,少数指令优先级较高,如ng-repeat,优先级1000,保证其总是能够在其他指令之前执行。如果优先级相同,则在前面的先调用。

终止 terminal
设置true时,AngularJs将停止运行当前元素上比本指令优先级的指令，优先级相同的指令仍然运行。
举例
  < div ng-if="b" ng-view></ div>
  ngif优先级略高于ngview,如果b==true,ngif为true,ngView将会执行，否则ngView将不起作用。

模板template 案例位置directive.js:29 directive.html:27
1) HTML文本
2) 函数，参数为tElement何tAttrs,并返回一个代表模板的字符串。上面的t代表模板，相当于instance。
  a) 注意：
    i) 模板中科院包含表达式{{}}
    ii) 如果含有多个DOM元素，或者只有一个单独文本节点构成，那他必须包含在一个父元素中，即必须包含一个根元素

模板路径 templateUrl 案例位置directive.js:40 directive.html:31
两种使用形式：
1) 代表外部HTML文件路径的字符串
2) 函数,参数tElement和tAttrs,返回外部HTML文件字符串
注意：angular使用Ajax加载模板文件，开发时要运行一个本地服务器否则可能因长期错误
加载编译和链接函数都会暂停，如果模板数量众多或体积较大时会影响性能。 缓存机制解决

<i>第十八节指令5因为写到这里可读性较高，所以特此声明下</i>
嵌入 transclude 案例位置directive.js:62 directive.html:39
如果设置，其值必须为true，默认为false，嵌入常和作用域(scope)配合使用，创建一些可复用的组件。
<b>作用域scope</b>
1) 布尔值，默认为false,设置为true表示从父作用域继承并创建新作用域
2) 对象，创建一个隔离作用域
<b>对象,创建一个隔离作用域</b>
绑定策略补充:可以指定属性名称而不必与隔离作用域中指定的对应
@attr、=attr、&attr
</em>
<strong>指令1</strong>
<b>对应案例directive.html</b>
<em>指令-directive
已经学过的内置指令
ng-app/ng-contorller/ng-init/ng-model/ng-bind/ng-value/ng-change/ng-click/ng-repeat
<b>第一个自定义指令</b>
app.directive('myDirective',function(){
  return {
    template:....
  }
})
//命名约定：使用驼峰写法，大写字母处在使用的时候需要用'-'隔空
1). 使用指令的四种形式：
  a) 属性(A)
  b) 标签(E)element
  c) 类(C)class
  d) 注释(M)
    i) < !-- directive:my-directive -->
  注意：从浏览器的兼容方面考虑，建议使用A或E
2). replace: 替换掉指令标签，使用户看不到指令，而只能看到最终生成的DOM元素
3). 向指令中传递参数：
  a) 使用元素所属的作用域中的变量
    i) 缺点:很明显，指令对控制器产生依赖，如果控制器被移除，或者控制器中也需要这个变量名，产生命名冲突。
  b) 通过隔离作用域初始化参数

<b>使用隔离作用域</b>
1.传递布尔值，默认为false,意为不使用隔离作用域,设置为true
scope: {...}  更有意义的设置：
  a) @:可以直接从属性中获取值
  b) =:可以传递表达式
  c) &:可以传递函数(通常作为回掉函数)
    i) 这里的函数是执行的了，而且在template里面还要执行。。可以用=解决啊。搞不懂哦
</em>
<strong>第十三讲过滤器三</strong>
<em>回顾:
1). orderBy 排序
2). filter 过滤  筛选类似搜索功能
3). ng-repeat: 迭代
<b>使用js调用过滤器</b>详见table.html:81
$filter('orderBy')(array, expression, reverse)
注意事项
1) 需要依赖注入$filter
2) 排序执行以后并不改变原数组，二手返回排序后的新数组
<b>自定义过滤器</b>
过滤器属于服务(service)的一种，类似conrtoller,可以自定义实现所需的功率功能，称为自定义过滤器
定义方式如下:
详见table.html:105
</em>
<strong>第十讲过滤器1</strong>
<b>对应案例table.html:33</b>
<em>可以对输入的值按照指定的方案进行处理后再输出的函数
<b>过滤器</b>
1). 货币过滤器 {{danj2*shul2|currency}}，{{danj2*shul2|currency:'￥'}}
2). 日期过滤器:date {{new Date()|date:'yyyy-MM-dd'}}
3). 数字过滤器:number,格式化数字 {{123234.2356|number:2}}
4). limitTo: 限制长度  {{'伺服电机无二哦iu我去诶UI哦全文'|limitTo:10}} 对数组也是有用的 {{[1,2,3]|limitTo:2}}
5). lowercase 转换字符串为小写形式
6). uppercase 转换字符串为大写形式
7). filter: 从array中选择一个子集，作为一个新数组返回(详见table.html:38)
9). orderBy: 通过expression来排序指定的数组。字符串按照字母的顺序排序，数字呢按照大小排序
  a). 注意：如果你发下数组没有正确排序，请确认他们保存的是数字而不是字符串
  b). {{orderBy_expression|orderBy:expression:reverse}}
</em>
<strong>第九讲数据绑定和表达式五</strong>
<b>对应案例table.html canvas.js:37</b>
<em>$scope.$watch 是angular内置函数 预模型的观察和监控
绑定表达式可以使用$watch的方式监控
接收一个表达式...
scope.$watch('expression',function(newVal,oldVal){})
</em>
<strong>第八讲数据绑定和表达式四</strong>
<b>对应案例ngClass.html</b>
<i>此讲是第二讲的续。所以备注到了第二讲，特此说明</i>

<strong>第七讲数据绑定和表达式三</strong>
<b>对应案例ngClass.html</b>
<i>此讲是第二讲的续。所以备注到了第二讲，特此说明</i>
<strong>第六讲数据绑定和表达式二</strong>
<b>对应案例ngClass.html</b>
<em><b>变量声明,和上节总结</b>
 1). 常量{{'abc'}}
 2). 变量{{abc}}
    a). 变量声明: $scope.abc='abc';
    b). 变量声明: ng-init="" 不推荐：module和view之间产生了耦合，这种形式常用于小程序的测试和展示但不适合用于生产，不利于后期的维护重用
    c). 变量声明: ng-model
 3). 函数{{fn( )}}
 4). 表达式{{a+b}}
<b>数据绑定</b>
<i>将模型的Model 和试图 View关联起来，双方的改变都能影响到对方</i>
数据绑定类型：
1). 单项数据绑定:模型能够影响试图，反之则不行
  a) 简写形式： {{abc}}
  b) 指令形式：
    i: ng-bind=''  是简写形式的替代，最佳实践是在首页使用ng-bind形式，其他页面使用简写形式。
    ii: ng-checked: 绑定radio和checkbox这种类型表单元素和选中状态
    iii: ng-class
    iv: ng-hide/ng-show: 是否显示/隐藏HTML元素
    v: ng-if: 直接隐藏代码 和jq的appendTo()很像
    vi: ng-readonly: 是否只读
    vii: ng-selected: 是否选择，主要用于select下拉列表
    viii: ng-src: 用于设置img元素图片url
    ix: ng-value: 设置输入框的值,单向初始化值
    x: ng-style: 动态设置样式
  c) 所谓单向，model会影响view ，但view不会影响model
2). 双线数据绑定:模型和试图可以相互影响
  a) 双向数据绑定自己会声明，ng-model="username";相当于controller里面声明
  $scope.username. 厉害了
</em>
<strong>第五讲表达式和数据绑定</strong>
<em>表达式是AngularJs模板引擎的重要内容，也是视图View的必要的组成部分，用来将模型动态转换为可视的DOM元素或者其内容({{}} 这就是表达式 'Hello'常量  num 变量)

<b>表达式的形式:</b>
1).常量: {{'hello,Word'}},{{123}},{{true}},{{[1,2,3]}}
  a) 注意：使用常量的形式，不能使用对象{{{a:'aaa'}}}
2).变量(重要)： {{num}}
3).函数(重要)： {{fn()}} 函数形式
4). 表达式: {{a+b}}  {{a&&b}} {{c?'yes' : 'no'}} 三元表达式
  a). 注意：条件语句不能再表达式中使用(如：if()else{},switch,while(){} )

<b>模型声明的几种形式：</b>
<i>$scope本身是域，那么作用域对象在angular里面其实就是module的这个角色，那么我们声明模型就在Scope上面去声明变量：</i>
1). $scope.a = 'hello.world'
2). ng-init="a='s';b=123"   可以声明多个，所有数据类型都可以声明
3). ng-model 双向数据绑定

</em>

<strong>第四节控制器和作用域</strong>
<em>控制器：在angularJs中控制器是一个函数，用来向试图的作用域里面添加额外的功能(可能是函数也可能是操作数据的操作)，主要是来设置作用域的初始状态并添加自定义行为。

<b>控制器的声明：</b>
 * 定义控制器myController
 * 第一个参数是控制器的名称
 * 第二个参数是控制器的具体定义，务必添加$scope(作用域对象)
app.controller('myController',function($scope){
$scope 就是上面所说的作用域
})
<b>控制器的使用：</b>
在需要的地方(html某个标签上)添加ng-controller这个指令
<b>注意事项:</b>
1).控制器中尽量保持简洁,也就是说我们在这里面只做一件事情$scope预模型对象初始化(主要是来设置作用域的初始状态并添加自定义行为)类似add函数，num设置初始值一些自定义行为
2).尽量只和$scope打交道
3).不能做一些复杂的数据访问
4).Ajax请求
5).或者进行DOM操作(不是不可以，是官方建议，因为这样违反了mvc的架构思想，发生了数据耦合)
6).格式化，数据操作都不应该
<b>控制器嵌套：</b>
不推荐这种  好像大漠穷秋老师讲的是 server 服务
嗯，应该就是这样，哎呀呀  听那个老师听的迷的，还是这个好理解，100分

</em>

<strong>第三节模块Module</strong>
<em> *使用angular.module()创建应用程序模块
 *第一个参数是模块名称
 *第二个是依赖模块数组
<b>angular.module('Myapp',[])</b>


<b>使用模块的好处：</b>
1).保持全局命名空间的清洁
2).编写测试代码更容易
3).易于在不同的应用程序之间复用代码。也就是提高代码的复用性
</em>











































<script>
window.onload=function(){(function(){var htm=document.getElementsByTagName("body")[0];htm.innerHTML=htm.innerHTML.replace(/\n/g,"<br/>").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/<strong>/g,"----------------------------------------<br/><br/><strong>").replace(/`/g," ")})();(function(){var htm=document.getElementsByTagName("a");for(var i=0;i<htm.length;i++){htm[i].target="_blank";htm[i].href=htm[i].innerHTML}})();(function(){var str=document.getElementsByTagName("strong");var mao=document.getElementsByTagName("ul")[0];var links=[];for(var i=0;i<str.length;i++){var strs=str[i].innerHTML.replace(/&nbsp;/g,"--");str[i].id=strs;links.push('<li><a href="#'+strs+'">'+strs+"</a></li>")}links.push('<a class="c" href="#"><u></u></a>');mao.innerHTML=links.join(" ")})();(function(){var is=document.getElementsByTagName("em");for(var i=0;i<is.length;i++){is[i].onclick=function(){if(this.style.overflow!="visible"){this.style.overflow="visible";this.style.height="auto";this.style.fontSize="20px"}else{this.style.overflow="hidden";this.style.height="29px";this.style.fontSize="13px"}}}})()};
</script>

</body>
</html>
